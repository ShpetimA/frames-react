"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e);function o(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)r.indexOf(o[t])<0&&Object.prototype.propertyIsEnumerable.call(e,o[t])&&(n[o[t]]=e[o[t]])}return n}function t(e,r,n,o){return new(n||(n=Promise))((function(t,a){function s(e){try{d(o.next(e))}catch(e){a(e)}}function i(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,i)}d((o=o.apply(e,r||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const a="https://cdn.checkout.com/js/framesv2.min.js";class s extends e.Component{constructor(){super(...arguments),this.loadScript=()=>{if("undefined"!=typeof window)return new Promise(((e,r)=>{const n=document.createElement("script");n.src=a,n.onload=r=>e(r),n.onerror=e=>r(e),document.body.appendChild(n)}))},this.initializeFrames=()=>{let e={publicKey:this.props.config.publicKey,debug:this.props.config.debug||!1,style:this.props.config.style,acceptedPaymentMethods:this.props.config.acceptedPaymentMethods,cardholder:this.props.config.cardholder,localization:this.props.config.localization,modes:this.props.config.modes,schemeChoice:this.props.config.schemeChoice,cardNumber:this.props.config.cardNumber,expiryDate:this.props.config.expiryDate,cvv:this.props.config.cvv,ready:this.props.ready,frameActivated:this.props.frameActivated,frameFocus:this.props.frameFocus,frameBlur:this.props.frameBlur,frameValidationChanged:this.props.frameValidationChanged,paymentMethodChanged:this.props.paymentMethodChanged,cardValidationChanged:this.props.cardValidationChanged,cardSubmitted:this.props.cardSubmitted,cardTokenized:this.props.cardTokenized,cardTokenizationFailed:this.props.cardTokenizationFailed,cardBinChanged:this.props.cardBinChanged};this.props.config.cardholder||delete e.cardholder,this.props.config.schemeChoice||delete e.schemeChoice,this.props.config.cardNumber||delete e.cardNumber,this.props.config.expiryDate||delete e.expiryDate,this.props.config.cvv||delete e.cvv,this.props.config.modes||delete e.modes,this.props.config.localization||delete e.localization;try{window.Frames?window.Frames.init(e):console.error("Frames was used before the script (from the CDN) was loaded completely")}catch(e){throw e}}}componentDidMount(){document.querySelector(`script[src$="${a}"]`)?this.initializeFrames():(()=>{t(this,void 0,void 0,(function*(){try{yield this.loadScript(),this.initializeFrames()}catch(e){throw new Error(e)}}))})()}shouldComponentUpdate(e){if("undefined"!=typeof window&&window.Frames){const r=window.Frames;e.config.cardholder&&e.config.cardholder.name&&(r.cardholder.name=e.config.cardholder.name),e.config.cardholder&&e.config.cardholder.billingAddress&&(r.cardholder.billingAddress=e.config.cardholder.billingAddress),e.config.cardholder&&e.config.cardholder.phone&&(r.cardholder.phone=e.config.cardholder.phone)}return!0}componentWillUnmount(){window.Frames&&(window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_SUBMITTED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_TOKENIZATION_FAILED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_TOKENIZED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_VALIDATION_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_ACTIVATED),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_BLUR),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_FOCUS),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_VALIDATION_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.PAYMENT_METHOD_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.READY))}render(){const{children:e}=this.props;return e}}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}s.init=e=>{window.Frames&&(window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_SUBMITTED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_TOKENIZATION_FAILED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_TOKENIZED),window.Frames.removeAllEventHandlers(window.Frames.Events.CARD_VALIDATION_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_ACTIVATED),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_BLUR),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_FOCUS),window.Frames.removeAllEventHandlers(window.Frames.Events.FRAME_VALIDATION_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.PAYMENT_METHOD_CHANGED),window.Frames.removeAllEventHandlers(window.Frames.Events.READY),e?window.Frames.init(e):window.Frames.init())},s.isCardValid=()=>!!window.Frames&&window.Frames.isCardValid(),s.submitCard=()=>window.Frames?window.Frames.submitCard():Promise.reject("Frames is not defined"),s.addEventHandler=(e,r)=>{window.Frames&&window.Frames.addEventHandler(e,r)},s.removeEventHandler=(e,r)=>{window.Frames&&window.Frames.removeEventHandler(e,r)},s.removeAllEventHandlers=e=>{window.Frames&&window.Frames.removeAllEventHandlers(e)},s.enableSubmitForm=()=>{window.Frames&&window.Frames.enableSubmitForm()};var d,l={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var c,m=(d||(d=1,c=l,function(){var e={}.hasOwnProperty;function r(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&(e=o(e,n(t)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return r.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var t="";for(var a in n)e.call(n,a)&&n[a]&&(t=o(t,a));return t}function o(e,r){return r?e?e+" "+r:e+r:e}c.exports?(r.default=r,c.exports=r):window.classNames=r}()),l.exports),w=i(m);exports.CardFrame=e=>{var{className:r}=e,t=o(e,["className"]);return n.default.createElement("div",Object.assign({className:w("card-frame",r)},t))},exports.CardNumber=e=>{var{className:r}=e,t=o(e,["className"]);return n.default.createElement("div",Object.assign({className:w("card-number-frame",r)},t))},exports.Cvv=e=>{var{className:r}=e,t=o(e,["className"]);return n.default.createElement("div",Object.assign({className:w("cvv-frame",r)},t))},exports.ExpiryDate=e=>{var{className:r}=e,t=o(e,["className"]);return n.default.createElement("div",Object.assign({className:w("expiry-date-frame",r)},t))},exports.Frames=s,exports.SchemeChoice=e=>{var{className:r}=e,t=o(e,["className"]);return n.default.createElement("div",Object.assign({className:w("scheme-choice-frame",r)},t))};
//# sourceMappingURL=index.js.map
